<mat-horizontal-stepper>
  <mat-step>
    <ng-template matStepLabel>Information and supported platforms</ng-template>
    <div class="row">
      <div id="carouselControls" class="carousel slide col-md-6" data-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item" *ngFor="let img of imagesForRoll; let i = index" [ngClass]="{'active': i === 0}">
            <img class="d-block w-100" [src]="img.src" [alt]="img.alt">
          </div>
        </div>
        <a class="carousel-control-prev" href="#carouselControls" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselControls" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
      <div class="col-md-6">
        <h2>WoW auction helper web application</h2>
        <wah-about-what-is></wah-about-what-is>
        <h3>Privacy</h3>
        <wah-about-privacy></wah-about-privacy>
        <h3>Disclaimer</h3>
        <ul>
          <li>
            For the best user experience, it's recommended that you use
            <i class="fab fa-chrome"></i>
            Chrome (latest version) as your browser for this app.
          </li>
          <li>
            As I have a limited time on my hands, the following browsers are the ones I support(and run e2e tests on):
            <em>
              <i class="fab fa-chrome"></i>
              Chrome (latest version) and
              <i class="fab fa-firefox"></i>
              Firefox Quantum (latest version).</em>
          </li>
          <li>
            All calculations are done on the client (your computer).
          </li>
          <li>
            Item, pet, recipe, TSM/Wowuction and auction data is stored on your computer in order to reduce load time and bandwidth usage.
            This should take up about a maximum of 200MB total on your computer.
          </li>
          <li>
            Using tools like CCleaner to clean your browser cache etc, will remove all your settings. So be aware of that.
          </li>
          <li>
            If you wish to look at the code, please feel free to do so. The
            <i class="fab fa-github"></i>
            GitHub link can be found
            <a routerLink="/about">here</a>.
          </li>
          <li>
            The only data you need to input is your realm and region, anything else is optional.
          </li>
        </ul>
      </div>
    </div>
    <div>
      <button class="float-right" mat-button matStepperNext>Lets get started
        <i class="fas fa-arrow-right"></i>
      </button>
    </div>
  </mat-step>
  <mat-step>
    <form [formGroup]="form">
      <ng-template matStepLabel>Realm, region and locale</ng-template>
      <div class="row">
        <div class="col-md-4">
          <wah-select-realm
                  [region]="form.getRawValue().region"
                  [realm]="form.getRawValue().realm"
                  [locale]="form.getRawValue().locale"
                  (changes)="realmSelectionEvent($event)">
          </wah-select-realm>
        </div>

        <div class="col-md-8">
          <mat-card>
            <mat-card-header>
              <mat-card-title>
                Import previous settings
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <mat-form-field class="col-md-10 float-left">
                <textarea class="col-md-12 row" matInput formControlName="importString" placeholder="Paste the string here"></textarea>
              </mat-form-field>
              <button class="float-right" mat-button matStepperPrevious (click)="importUserData()" [disabled]="form.controls.importString.status === 'INVALID'">
                <i class="fas fa-upload"></i>
                Restore
              </button>
              <button mat-button (click)="fileInput.click()">
                <i class="fas fa-upload"></i>
                Select a settings file to import
                <input class="d-none" type="file" accept="application/json" (change)="importFromFile($event)" #fileInput/>
              </button>
            </mat-card-content>
          </mat-card>
        </div>

        <div class="col-md-4">
          <mat-card>
            <mat-card-header>
              <mat-card-title>
                Select between the light or the dark theme:
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <mat-slide-toggle matTooltip="Toggle dark theme on/off" [checked]="isDarkMode()" (change)="saveUser($event)">
                {{ isDarkMode() ? 'Change to light theme' : 'Change to dark theme' }}
              </mat-slide-toggle>
              <p>
                You can change this at any time, in the upper right corner.
              </p>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </form>

    <button class="float-left" mat-button matStepperPrevious>
      <i class="fas fa-arrow-left"></i>
      Back
    </button>
    <button class="float-right" mat-button matStepperNext [disabled]="!isValid()">
      Next
      <i class="fas fa-arrow-right"></i>
    </button>
  </mat-step>
  <mat-step>
    <form [formGroup]="form">
      <ng-template matStepLabel>Characters (optional)</ng-template>
      <mat-card>
        <mat-card-content>
          <wah-characters [region]="form.value.region" [realm]="form.value.realm"></wah-characters>
        </mat-card-content>
      </mat-card>
      <button class="float-left" mat-button matStepperPrevious>
        <i class="fas fa-arrow-left"></i>
        Back
      </button>
      <button class="float-right" mat-button matStepperNext [disabled]="!isValid()" *ngIf="isWithinSupported3RDPartyAPIRegion(); else completeButtonTemplate">
        Next
      </button>
      <ng-template #completeButtonTemplate>
        <button class="float-right" mat-button [disabled]="!isValid()" (click)="completeSetup()">
          Complete the setup
        </button>
      </ng-template>
    </form>
  </mat-step>

  <mat-step *ngIf="isWithinSupported3RDPartyAPIRegion()">
    <form [formGroup]="form">
      <ng-template matStepLabel>API and settings (optional)</ng-template>
      <strong>Your API key (optional)</strong>
      <p>
        Supplying the app with an API key, allows it to display statistical data like Market value, estimated demand etc.
      </p>
      <mat-card>
        <mat-card-header>
          <mat-card-title>
            TSM
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field class="col-md-12">
            <input matInput placeholder="Tradeskillmaster API key" formControlName="tsmKey">
          </mat-form-field>
          If you don't have a TSM account you can
          <a href="https://www.tradeskillmaster.com/user/register" target="_blank">create one by clicking this link</a>. Once you've done that, you can find your API key in the bottom of your
          <a href="https://www.tradeskillmaster.com/user" target="_blank">account page</a>.
        </mat-card-content>
      </mat-card>
    </form>
    <div>
      <button class="float-left" mat-button matStepperPrevious>
        <i class="fas fa-arrow-left"></i>
        Back
      </button>
      <button class="float-right" mat-button [disabled]="!isValid()" (click)="completeSetup()">
        Complete the setup
      </button>
    </div>
  </mat-step>
</mat-horizontal-stepper>
